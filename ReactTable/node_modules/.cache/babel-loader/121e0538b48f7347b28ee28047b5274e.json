{"ast":null,"code":"var _jsxFileName = \"/Users/saltmer/Desktop/crud-ui/src/App.js\";\nimport React, { Component, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { nanoid } from 'nanoid'; // import JsonDataDisplay from './Table.js';\n// import Table from './Table.js';\n\nimport JsonData from './data.json'; // https://api.jsonserve.com/1ekkzf\n\nimport JsonNewData from \"./newData.json\"; // import PersonList from './PersonList.js';\n// import Form from './Form.js';\n\nexport async function deleteS(id) {\n  const response = await fetch(`http://178.128.196.163:3000/api/records/${id}`, {\n    method: \"DELETE\"\n  });\n  return response.json();\n}\n;\n\nfunction App() {\n  const [contacts, setContacts] = useState([]);\n  const [addFormData, setAddFormData] = useState({\n    name: \"\",\n    age: \"\",\n    email: \"\"\n  });\n  const data = {\n    name: \"zhenya\",\n    age: 10,\n    email: \"ee@mail.ru\"\n  };\n\n  async function getDataServ() {\n    let response = await fetch('http://178.128.196.163:3000/api/records', {\n      method: 'GET'\n    });\n    let result = await response.json();\n    setContacts(result);\n  }\n\n  async function putDataServ() {\n    let response = await fetch('http://178.128.196.163:3000/api/records', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    let result = await response.json();\n    setContacts(result);\n  }\n\n  console.log(\"cont bef= \", contacts);\n  getDataServ();\n  console.log(\"cont after= \", contacts);\n  putDataServ();\n  console.log(\"cont after put= \", contacts); // if (contacts.length)\n  // {\n  //   for (let i = 0; i < contacts.length; i++)\n  //     deleteS(contacts[i]._id);\n  //   console.log(\"cont delete= \", contacts);\n  // }\n  // useEffect(()=>{\n  //   axios.get(`http://178.128.196.163:3000/api/records`) \n  //     .then(res => { setContacts(res.data); console.log(\"all: \", res.data)})\n  //       .catch(err=>{console.log(err)})\n  //       // console.log('in hook');\n  //       // console.log(\"useef:  \", contacts);\n  //     }, []);\n  //     if (contacts.length)\n  //       console.log(\"del: \", deleteS(contacts[0]._id));\n  // useEffect(()=>{\n  //   axios.get(`http://178.128.196.163:3000/api/records/624aae22ae66af078a5214c6`) //624aae22ae66af078a5214c6 ${contacts[0]._id\n  //     .then(res => {console.log(\"get first: \", res.data)})\n  //       .catch(err=>{console.log(err)})\n  //       // console.log('in hook');\n  //       // console.log(\"useef:  \", contacts);\n  //     }, []);\n  // console.log(\"contact:  \", contacts);\n  // if (contacts.length)\n  //   {\n  //   axios.delete(`http://178.128.196.163:3000/api/records/:${contacts[0]._id}`)\n  //       .then(res => {\n  //         console.log(\"delete\" , res);\n  //         console.log(res.data);\n  //       })\n  //     };\n  // console.log(\"JSON: \", JsonData[0]);\n  // console.log(\"data: \", data);\n  // console.log(JsonData.length);\n  //   useEffect(()=> {\n  //     var i = 0;\n  //     // while (i < JsonData.length)\n  //     // {\n  //       if (contacts.length)\n  //       {\n  //         axios.put(`http://178.128.196.163:3000/api/records`,  JsonData[0] )\n  //         .then(res => {\n  //           console.log(res);\n  //           console.log(res.data);\n  //         });\n  //       }\n  //     //     i++;\n  //     // }\n  // }, []);\n  // if (contacts && !contacts.hasOwnProperty('data')) // todo\n  // {\n  //   return (\n  //     <h1>Error</h1>\n  //   )\n  // }\n  // console.log(contacts);\n\n  const addForm = event => {\n    event.preventDefault(); // отмена события\n\n    const fieldName = event.target.getAttribute('name'); // что лежит в инпуте под name - это name and age and email\n\n    const fieldValue = event.target.value;\n    const newFormData = { ...addFormData\n    }; // копирует с возсожностью расширения\n\n    newFormData[fieldName] = fieldValue; //заполняем массив новыми значениями\n    // console.log(newFormData);\n\n    setAddFormData(newFormData); // обновляем наш  addFormData, изначально был пустым\n  };\n\n  const addFormSubmit = event => {\n    event.preventDefault(); // нужно для того чтобы при нажатии на кнопку страница не обновлялась\n    // console.log(Object.keys(JsonData).length);\n    // const getMaxIndex = () => {\n    //   var max = contacts[0].id;\n    //   for (var i = 0; i < contacts.length; i++)\n    //   {\n    //     if (contacts[i].id > max)\n    //       max = contacts[i].id;\n    //   }\n    //   return max;\n    // }\n    // var max = getMaxIndex();\n    // console.log(max);\n\n    const newRow = {\n      _id: nanoid(),\n      data: {\n        name: addFormData.name,\n        age: addFormData.age,\n        email: addFormData.email\n      },\n      __v: 0\n    };\n    const newContact = [...contacts, newRow]; // добавляем в массив contacts новую строку\n\n    setContacts(newContact); // обновляем данные\n    // console.log(newContact);\n    // console.log(contacts);\n  };\n\n  const deleteFunc = contactId => {\n    const newContacts = [...contacts];\n    const index = newContacts.findIndex(item => item._id === contactId);\n    newContacts.splice(index, 1); // удалить в newContacts начинаю с номера index один элемент\n\n    setContacts(newContacts);\n  }; // render() {\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 10\n    }\n  }, \"MyApp Table\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-striped\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 21\n    }\n  }, \"Age\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, \"Email\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 18\n    }\n  }, contacts.map(info => /*#__PURE__*/React.createElement(\"tr\", {\n    key: info._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, info.data.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, info.data.age), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 25\n    }\n  }, info.data.email), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: () => deleteFunc(info._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 29\n    }\n  }, \"Delete\"))))))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, \"Add a contact\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-inline\",\n    onSubmit: addFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    className: \"form-control form-inline_input\",\n    required: \"required\",\n    placeholder: \"Your name\",\n    onChange: addForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"age\",\n    className: \"form-control form-inline_input\",\n    required: \"required\",\n    placeholder: \"Your age\",\n    onChange: addForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    className: \"form-control form-inline_input\",\n    required: \"required\",\n    placeholder: \"Your email\",\n    onChange: addForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"Add\")))); // }\n}\n\nexport default App; // import React from 'react';\n// import PersonList from './PersonList.js';\n// import PersonRemove from './PersonRemove';\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <PersonList/>\n//       <PersonRemove/>\n//     </div>\n//   )\n// }\n// export default App;","map":{"version":3,"sources":["/Users/saltmer/Desktop/crud-ui/src/App.js"],"names":["React","Component","useEffect","useState","axios","nanoid","JsonData","JsonNewData","deleteS","id","response","fetch","method","json","App","contacts","setContacts","addFormData","setAddFormData","name","age","email","data","getDataServ","result","putDataServ","headers","body","JSON","stringify","console","log","addForm","event","preventDefault","fieldName","target","getAttribute","fieldValue","value","newFormData","addFormSubmit","newRow","_id","__v","newContact","deleteFunc","contactId","newContacts","index","findIndex","item","splice","map","info"],"mappings":"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","sourcesContent":["import React, { Component , useEffect, useState} from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { nanoid } from 'nanoid';\n// import JsonDataDisplay from './Table.js';\n// import Table from './Table.js';\nimport JsonData from './data.json'; // https://api.jsonserve.com/1ekkzf\nimport JsonNewData from \"./newData.json\";\n// import PersonList from './PersonList.js';\n// import Form from './Form.js';\n\n\nexport async function deleteS(id) {\n  const response = await fetch(`http://178.128.196.163:3000/api/records/${id}`, {\n    method: \"DELETE\",\n  });\n  return response.json();\n};\n\nfunction App() {\n\n  const [contacts, setContacts] = useState([]);\n\n\n  const [addFormData, setAddFormData] = useState(\n    {\n      name: \"\",\n      age: \"\",\n      email: \"\",\n    }\n  );\n  const data = {\n    name: \"zhenya\",\n    age: 10,\n    email: \"ee@mail.ru\",\n};\n\nasync function getDataServ () {\n  let response = await fetch('http://178.128.196.163:3000/api/records', {\n    method: 'GET',\n  });\n  let result = await response.json();\n  setContacts(result); \n}\n\nasync function putDataServ () {\n  let response = await fetch('http://178.128.196.163:3000/api/records', {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  });\n  let result = await response.json();\n  setContacts(result); \n}\n\nconsole.log(\"cont bef= \", contacts);\ngetDataServ();\nconsole.log(\"cont after= \", contacts);\nputDataServ();\nconsole.log(\"cont after put= \", contacts);\n\n// if (contacts.length)\n// {\n//   for (let i = 0; i < contacts.length; i++)\n//     deleteS(contacts[i]._id);\n//   console.log(\"cont delete= \", contacts);\n// }\n\n\n\n  // useEffect(()=>{\n  //   axios.get(`http://178.128.196.163:3000/api/records`) \n  //     .then(res => { setContacts(res.data); console.log(\"all: \", res.data)})\n  //       .catch(err=>{console.log(err)})\n  //       // console.log('in hook');\n  //       // console.log(\"useef:  \", contacts);\n  //     }, []);\n\n  //     if (contacts.length)\n  //       console.log(\"del: \", deleteS(contacts[0]._id));\n\n\n  // useEffect(()=>{\n  //   axios.get(`http://178.128.196.163:3000/api/records/624aae22ae66af078a5214c6`) //624aae22ae66af078a5214c6 ${contacts[0]._id\n  //     .then(res => {console.log(\"get first: \", res.data)})\n  //       .catch(err=>{console.log(err)})\n  //       // console.log('in hook');\n  //       // console.log(\"useef:  \", contacts);\n  //     }, []);\n  // console.log(\"contact:  \", contacts);\n\n\n    // if (contacts.length)\n    //   {\n    //   axios.delete(`http://178.128.196.163:3000/api/records/:${contacts[0]._id}`)\n    //       .then(res => {\n    //         console.log(\"delete\" , res);\n    //         console.log(res.data);\n    //       })\n    //     };\n\n\n\n  // console.log(\"JSON: \", JsonData[0]);\n  // console.log(\"data: \", data);\n// console.log(JsonData.length);\n\n\n//   useEffect(()=> {\n//     var i = 0;\n//     // while (i < JsonData.length)\n//     // {\n//       if (contacts.length)\n//       {\n//         axios.put(`http://178.128.196.163:3000/api/records`,  JsonData[0] )\n//         .then(res => {\n//           console.log(res);\n//           console.log(res.data);\n//         });\n//       }\n//     //     i++;\n//     // }\n// }, []);\n\n\n  // if (contacts && !contacts.hasOwnProperty('data')) // todo\n  // {\n  //   return (\n  //     <h1>Error</h1>\n  //   )\n  // }\n  // console.log(contacts);\n\n  const addForm = (event) => {\n    event.preventDefault();  // отмена события\n    const fieldName = event.target.getAttribute('name'); // что лежит в инпуте под name - это name and age and email\n    const fieldValue = event.target.value; \n  \n    const newFormData = {...addFormData}; // копирует с возсожностью расширения\n    newFormData[fieldName] = fieldValue; //заполняем массив новыми значениями\n    // console.log(newFormData);\n  \n    setAddFormData(newFormData); // обновляем наш  addFormData, изначально был пустым\n  };\n\n  const addFormSubmit = (event) => {\n    event.preventDefault();// нужно для того чтобы при нажатии на кнопку страница не обновлялась\n  \n    // console.log(Object.keys(JsonData).length);\n    // const getMaxIndex = () => {\n    //   var max = contacts[0].id;\n    //   for (var i = 0; i < contacts.length; i++)\n    //   {\n    //     if (contacts[i].id > max)\n    //       max = contacts[i].id;\n    //   }\n    //   return max;\n    // }\n    // var max = getMaxIndex();\n  // console.log(max);\n\n\n    const newRow = {\n      _id: nanoid(),\n      data :\n      {\n        name: addFormData.name,\n        age: addFormData.age,\n        email: addFormData.email,\n      },\n      __v: 0,\n    };\n\n    const newContact = [...contacts, newRow]; // добавляем в массив contacts новую строку\n    setContacts(newContact); // обновляем данные\n    // console.log(newContact);\n    // console.log(contacts);\n  };\n\n  const deleteFunc = (contactId) => {\n    const newContacts = [...contacts];\n\n    const index = newContacts.findIndex(item => item._id === contactId);\n\n    newContacts.splice(index, 1); // удалить в newContacts начинаю с номера index один элемент\n    setContacts(newContacts);\n  };\n\n\n  // render() {\n    return (\n      <div className=\"container\">\n         <h1>MyApp Table</h1> \n          <div>\n            <table className=\"table table-striped\">\n                <thead>\n                    <tr>\n                    <th>Name</th>\n                    <th>Age</th>\n                    <th>Email</th>\n                    </tr>\n                </thead>\n                 <tbody>\n                    {contacts.map((info)=>(\n                    <tr key={info._id}>\n                        <td>{info.data.name}</td>\n                        <td>{info.data.age}</td>\n                        <td>{info.data.email}</td>\n                        {/* <PersonList/> */}\n                        <td><button className='btn btn-primary' onClick={()=>deleteFunc(info._id)}>Delete</button></td>\n                    </tr>\n                \n                      ))}\n                </tbody>\n                    \n            </table>\n             \n          </div>\n          <h2>Add a contact</h2>\n          <form className=\"form-inline\" onSubmit={addFormSubmit}>\n          <div className=\"form-group\">\n            <input type=\"text\" name=\"name\" className='form-control form-inline_input' required=\"required\" placeholder='Your name' onChange={addForm}/>\n            <input type=\"text\" name=\"age\" className='form-control form-inline_input' required=\"required\" placeholder='Your age' onChange={addForm}/>\n            <input type=\"text\" name=\"email\" className='form-control form-inline_input' required=\"required\" placeholder='Your email' onChange={addForm}/>\n            <button type=\"submit\" className='btn btn-primary' >Add</button>\n            </div>\n\t\t\t     </form>\n          {/* <PersonList/> */}\n      </div>\n    );\n  // }\n}\n\nexport default App;\n\n// import React from 'react';\n// import PersonList from './PersonList.js';\n// import PersonRemove from './PersonRemove';\n\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <PersonList/>\n//       <PersonRemove/>\n//     </div>\n//   )\n// }\n// export default App;"]},"metadata":{},"sourceType":"module"}