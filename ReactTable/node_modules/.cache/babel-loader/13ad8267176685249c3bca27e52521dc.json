{"ast":null,"code":"import _toConsumableArray from\"/Users/saltmer/Desktop/crud-ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/saltmer/Desktop/crud-ui/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/saltmer/Desktop/crud-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useEffect,useState}from'react';import axios from'axios';import'./App.css';import{nanoid}from'nanoid';// import JsonDataDisplay from './Table.js';\n// import Table from './Table.js';\nimport JsonData from'./data.json';// https://api.jsonserve.com/1ekkzf\n// import PersonList from './PersonList.js';\n// import Form from './Form.js';\nfunction App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];var _useState3=useState({name:\"\",age:\"\",email:\"\"}),_useState4=_slicedToArray(_useState3,2),addFormData=_useState4[0],setAddFormData=_useState4[1];// useEffect(()=>{\n//   axios.get(`http://178.128.196.163:3000/api/records`)\n//     .then(res => {setContacts(res.data); console.log(res.data)})\n//       .catch(err=>{console.log(err)})\n//       // console.log('in hook');\n//       // console.log(\"useef:  \", contacts);\n//     }, []);\n// console.log(\"contact:  \", contacts);\nvar data={name:\"zhenya\",age:10,email:\"ee@mail.ru\"};// console.log(\"JSON: \", JsonData[0]);\n// console.log(\"data: \", data);\nconsole.log(JsonData.length);// useEffect(()=> {\n//   var i = 0;\n//   while (i < JsonData.length)\n//   {\n//       axios.put(`http://178.128.196.163:3000/api/records`,  JsonData[i] )\n//       .then(res => {\n//         console.log(res);\n//         console.log(res.data);\n//       });\n//       i++;\n//   }\n// });\n// if (contacts && !contacts.hasOwnProperty('data')) // todo\n// {\n//   return (\n//     <h1>Error</h1>\n//   )\n// }\n// console.log(contacts);\nvar addForm=function addForm(event){event.preventDefault();// отмена события\nvar fieldName=event.target.getAttribute('name');// что лежит в инпуте под name - это name and age and email\nvar fieldValue=event.target.value;var newFormData=_objectSpread({},addFormData);// копирует с возсожностью расширения\nnewFormData[fieldName]=fieldValue;//заполняем массив новыми значениями\n// console.log(newFormData);\nsetAddFormData(newFormData);// обновляем наш  addFormData, изначально был пустым\n};var addFormSubmit=function addFormSubmit(event){event.preventDefault();// нужно для того чтобы при нажатии на кнопку страница не обновлялась\n// console.log(Object.keys(JsonData).length);\n// const getMaxIndex = () => {\n//   var max = contacts[0].id;\n//   for (var i = 0; i < contacts.length; i++)\n//   {\n//     if (contacts[i].id > max)\n//       max = contacts[i].id;\n//   }\n//   return max;\n// }\n// var max = getMaxIndex();\n// console.log(max);\nvar newRow={_id:nanoid(),data:{name:addFormData.name,age:addFormData.age,email:addFormData.email},__v:0};var newContact=[].concat(_toConsumableArray(contacts),[newRow]);// добавляем в массив contacts новую строку\nsetContacts(newContact);// обновляем данные\n// console.log(newContact);\n// console.log(contacts);\n};var deleteFunc=function deleteFunc(contactId){var newContacts=_toConsumableArray(contacts);var index=newContacts.findIndex(function(item){return item._id===contactId;});newContacts.splice(index,1);// удалить в newContacts начинаю с номера index один элемент\nsetContacts(newContacts);};// render() {\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",null,\"MyApp Table\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Age\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"))),/*#__PURE__*/React.createElement(\"tbody\",null,contacts.map(function(info){return/*#__PURE__*/React.createElement(\"tr\",{key:info._id},/*#__PURE__*/React.createElement(\"td\",null,info.data.name),/*#__PURE__*/React.createElement(\"td\",null,info.data.age),/*#__PURE__*/React.createElement(\"td\",null,info.data.email),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return deleteFunc(info._id);}},\"Delete\")));})))),/*#__PURE__*/React.createElement(\"h2\",null,\"Add a contact\"),/*#__PURE__*/React.createElement(\"form\",{className:\"form-inline\",onSubmit:addFormSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",className:\"form-control form-inline_input\",required:\"required\",placeholder:\"Your name\",onChange:addForm}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"age\",className:\"form-control form-inline_input\",required:\"required\",placeholder:\"Your age\",onChange:addForm}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"email\",className:\"form-control form-inline_input\",required:\"required\",placeholder:\"Your email\",onChange:addForm}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Add\"))));// }\n}export default App;// import React from 'react';\n// import PersonList from './PersonList.js';\n// import PersonRemove from './PersonRemove';\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <PersonList/>\n//       <PersonRemove/>\n//     </div>\n//   )\n// }\n// export default App;","map":{"version":3,"sources":["/Users/saltmer/Desktop/crud-ui/src/App.js"],"names":["React","Component","useEffect","useState","axios","nanoid","JsonData","App","contacts","setContacts","name","age","email","addFormData","setAddFormData","data","console","log","length","addForm","event","preventDefault","fieldName","target","getAttribute","fieldValue","value","newFormData","addFormSubmit","newRow","_id","__v","newContact","deleteFunc","contactId","newContacts","index","findIndex","item","splice","map","info"],"mappings":"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","sourcesContent":["import React, { Component , useEffect, useState} from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport { nanoid } from 'nanoid';\n// import JsonDataDisplay from './Table.js';\n// import Table from './Table.js';\nimport JsonData from './data.json'; // https://api.jsonserve.com/1ekkzf\n// import PersonList from './PersonList.js';\n// import Form from './Form.js';\n\nfunction App() {\n\n  const [contacts, setContacts] = useState([]);\n\n\n  const [addFormData, setAddFormData] = useState(\n    {\n      name: \"\",\n      age: \"\",\n      email: \"\",\n    }\n  );\n\n  // useEffect(()=>{\n  //   axios.get(`http://178.128.196.163:3000/api/records`)\n  //     .then(res => {setContacts(res.data); console.log(res.data)})\n  //       .catch(err=>{console.log(err)})\n  //       // console.log('in hook');\n  //       // console.log(\"useef:  \", contacts);\n  //     }, []);\n  // console.log(\"contact:  \", contacts);\n\n  const data = {\n    name: \"zhenya\",\n    age: 10,\n    email: \"ee@mail.ru\",\n};\n\n  // console.log(\"JSON: \", JsonData[0]);\n  // console.log(\"data: \", data);\nconsole.log(JsonData.length);\n\n\n  // useEffect(()=> {\n  //   var i = 0;\n  //   while (i < JsonData.length)\n  //   {\n  //       axios.put(`http://178.128.196.163:3000/api/records`,  JsonData[i] )\n  //       .then(res => {\n  //         console.log(res);\n  //         console.log(res.data);\n  //       });\n  //       i++;\n  //   }\n  // });\n\n\n  // if (contacts && !contacts.hasOwnProperty('data')) // todo\n  // {\n  //   return (\n  //     <h1>Error</h1>\n  //   )\n  // }\n  // console.log(contacts);\n\n  const addForm = (event) => {\n    event.preventDefault();  // отмена события\n    const fieldName = event.target.getAttribute('name'); // что лежит в инпуте под name - это name and age and email\n    const fieldValue = event.target.value; \n  \n    const newFormData = {...addFormData}; // копирует с возсожностью расширения\n    newFormData[fieldName] = fieldValue; //заполняем массив новыми значениями\n    // console.log(newFormData);\n  \n    setAddFormData(newFormData); // обновляем наш  addFormData, изначально был пустым\n  };\n\n  const addFormSubmit = (event) => {\n    event.preventDefault();// нужно для того чтобы при нажатии на кнопку страница не обновлялась\n  \n    // console.log(Object.keys(JsonData).length);\n    // const getMaxIndex = () => {\n    //   var max = contacts[0].id;\n    //   for (var i = 0; i < contacts.length; i++)\n    //   {\n    //     if (contacts[i].id > max)\n    //       max = contacts[i].id;\n    //   }\n    //   return max;\n    // }\n    // var max = getMaxIndex();\n  // console.log(max);\n\n\n    const newRow = {\n      _id: nanoid(),\n      data :\n      {\n        name: addFormData.name,\n        age: addFormData.age,\n        email: addFormData.email,\n      },\n      __v: 0,\n    };\n\n    const newContact = [...contacts, newRow]; // добавляем в массив contacts новую строку\n    setContacts(newContact); // обновляем данные\n    // console.log(newContact);\n    // console.log(contacts);\n  };\n\n  const deleteFunc = (contactId) => {\n    const newContacts = [...contacts];\n\n    const index = newContacts.findIndex(item => item._id === contactId);\n\n    newContacts.splice(index, 1); // удалить в newContacts начинаю с номера index один элемент\n    setContacts(newContacts);\n  };\n\n\n  // render() {\n    return (\n      <div className=\"container\">\n         <h1>MyApp Table</h1> \n          <div>\n            <table className=\"table table-striped\">\n                <thead>\n                    <tr>\n                    <th>Name</th>\n                    <th>Age</th>\n                    <th>Email</th>\n                    </tr>\n                </thead>\n                 <tbody>\n                    {contacts.map((info)=>(\n                    <tr key={info._id}>\n                        <td>{info.data.name}</td>\n                        <td>{info.data.age}</td>\n                        <td>{info.data.email}</td>\n                        {/* <PersonList/> */}\n                        <td><button className='btn btn-primary' onClick={()=>deleteFunc(info._id)}>Delete</button></td>\n                    </tr>\n                \n                      ))}\n                </tbody>\n                    \n            </table>\n             \n          </div>\n          <h2>Add a contact</h2>\n          <form className=\"form-inline\" onSubmit={addFormSubmit}>\n          <div className=\"form-group\">\n            <input type=\"text\" name=\"name\" className='form-control form-inline_input' required=\"required\" placeholder='Your name' onChange={addForm}/>\n            <input type=\"text\" name=\"age\" className='form-control form-inline_input' required=\"required\" placeholder='Your age' onChange={addForm}/>\n            <input type=\"text\" name=\"email\" className='form-control form-inline_input' required=\"required\" placeholder='Your email' onChange={addForm}/>\n            <button type=\"submit\" className='btn btn-primary' >Add</button>\n            </div>\n\t\t\t     </form>\n          {/* <PersonList/> */}\n      </div>\n    );\n  // }\n}\n\nexport default App;\n\n// import React from 'react';\n// import PersonList from './PersonList.js';\n// import PersonRemove from './PersonRemove';\n\n// function App() {\n//   return (\n//     <div className=\"App\">\n//       <PersonList/>\n//       <PersonRemove/>\n//     </div>\n//   )\n// }\n// export default App;"]},"metadata":{},"sourceType":"module"}